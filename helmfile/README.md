# Helmfile κµ¬μ΅°

μ΄ λ””λ ‰ν† λ¦¬λ” Astrago λ°°ν¬λ¥Ό μ„ν• ν†µν•© Helmfile κµ¬μ΅°λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.

## π“ λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
helmfile/
β”β”€β”€ helmfile.yaml           # λ‹¨μΌ ν†µν•© Helmfile μ„¤μ •
β”β”€β”€ charts/
β”‚   β”β”€β”€ external/          # μ¤ν”„λΌμΈμ© λ‹¤μ΄λ΅λ“λ μ™Έλ¶€ μ°¨νΈ
β”‚   β”β”€β”€ custom/            # μ»¤μ¤ν…€ Helm μ°¨νΈ
β”‚   β””β”€β”€ patches/           # Kustomize ν¨μΉ νμΌ
β”β”€β”€ values/
β”‚   β”β”€β”€ common/            # ν™κ²½ κ°„ κ³µμ λλ” κ³µν†µ values
β”‚   β””β”€β”€ templates/         # Go ν…ν”λ¦Ώ νμΌ
β””β”€β”€ environments/
    β”β”€β”€ dev/               # κ°λ° ν™κ²½ μ„¤μ •
    β”β”€β”€ stage/             # μ¤ν…μ΄μ§• ν™κ²½ μ„¤μ •
    β””β”€β”€ prod/              # ν”„λ΅λ•μ… ν™κ²½ μ„¤μ •
```

## π― νΉμ§•

- **λ‹¨μΌ νμΌ κ΄€λ¦¬**: λ¨λ“  releasesλ¥Ό `helmfile.yaml`μ—μ„ κ΄€λ¦¬
- **μ¤ν”„λΌμΈ μ§€μ›**: λ¨λ“  μ™Έλ¶€ μ°¨νΈκ°€ `charts/external/`μ— λ΅μ»¬ μ €μ¥
- **Tier κΈ°λ° λ°°ν¬**: Infrastructure β†’ Monitoring β†’ Security β†’ Applications μμ„
- **ν™κ²½λ³„ λ¶„λ¦¬**: ν™κ²½λ³„ μ„¤μ •μ΄ λ…λ¦½μ μΌλ΅ κ΄€λ¦¬λ¨

## π€ μ‚¬μ©λ²•

### λ°°ν¬
```bash
# κ°λ° ν™κ²½
helmfile -e dev apply

# μ¤ν…μ΄μ§• ν™κ²½  
helmfile -e stage apply

# ν”„λ΅λ•μ… ν™κ²½
helmfile -e prod apply
```

### κ²€μ¦
```bash
# λ³€κ²½ μ‚¬ν•­ λ―Έλ¦¬λ³΄κΈ°
helmfile -e dev diff

# μ°¨νΈ κ²€μ¦
helmfile -e dev lint
```

## π“‹ μ”κµ¬μ‚¬ν•­

- Helm 3.8+
- Helmfile 0.150+
- μ¤ν”„λΌμΈ ν™κ²½ μ§€μ›μ„ μ„ν• λ΅μ»¬ μ°¨νΈ μ €μ¥

## β οΈ μ£Όμμ‚¬ν•­

- λ¨λ“  μ™Έλ¶€ μ°¨νΈλ” `charts/external/`μ— λ΅μ»¬ μ €μ¥λμ–΄μ•Ό ν•¨
- ν™κ²½λ³„ secretsλ” μ•”νΈν™”ν•μ—¬ μ €μ¥
- λ°°ν¬ μ „ λ°λ“μ‹ `diff` λ…λ ΉμΌλ΅ λ³€κ²½μ‚¬ν•­ ν™•μΈ

---

**λ¦¬ν©ν† λ§ μ™„λ£**: BE-385 Helmfile κµ¬μ΅° λ¦¬ν©ν† λ§μ μΌν™μΌλ΅ μƒμ„±λ¨